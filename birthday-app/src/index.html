<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I'm Truly Sorry</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Poppins:wght@300;400&display=swap" rel="stylesheet">
    <style>
    
    </style>
</head>
<body>

    <canvas id="rain-canvas"></canvas>

    <div class="sorry-card">
        <div class="icon-box float" id="emoji">üòî</div>
        <h1>I'm So Sorry</h1>
        <p id="message">
            I know I messed up, and I hate that I hurt you. <br>
            Please give me a chance to make it right. <br>
            You mean the world to me.
        </p>
        <button class="btn-sorry" onclick="mendHeart()">Please Forgive Me?</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // Rain Effect Logic
        const canvas = document.getElementById('rain-canvas');
        const ctx = canvas.getContext('2d');
        let drops = [];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        function createDrops() {
            for(let i = 0; i < 100; i++) {
                drops.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    length: Math.random() * 20 + 10,
                    speed: Math.random() * 5 + 2
                });
            }
        }

        function drawRain() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#4a4a4a';
            ctx.lineWidth = 1;
            drops.forEach(d => {
                ctx.beginPath();
                ctx.moveTo(d.x, d.y);
                ctx.lineTo(d.x, d.y + d.length);
                ctx.stroke();
                d.y += d.speed;
                if(d.y > canvas.height) d.y = -20;
            });
            requestAnimationFrame(drawRain);
        }

        window.addEventListener('resize', resize);
        resize();
        createDrops();
        drawRain();

        // Interaction Logic
        function mendHeart() {
            const emoji = document.getElementById('emoji');
            const msg = document.getElementById('message');
            
            emoji.innerHTML = "‚ù§Ô∏è";
            emoji.style.transform = "scale(1.5)";
            msg.innerHTML = "Thank you for listening. <br> I promise to be better from now on.";
            
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#e63946', '#f1faee', '#a8dadc']
            });

            document.querySelector('.btn-sorry').style.display = 'none';
        }
    </script>
</body>
</html>
